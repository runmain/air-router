# AI Router Server

A unified API gateway for managing multiple AI service accounts and distributing requests across them.

## Overview

This project acts as a transparent proxy server for OpenAI-compatible AI APIs. It allows you to configure multiple AI service accounts and automatically routes requests to accounts that support the requested model.

## Features

- **Multi-Account Management**: Store and manage API credentials for multiple AI service accounts
- **Model Discovery**: Automatically queries each account's `/v1/models` endpoint to discover available models
- **Request Routing**: Routes API requests to accounts that support the requested model
- **Load Balancing**: Implements retry logic with random account selection
- **Claude Filtering**: Optionally filters out models containing "claude" in their names
- **Web UI**: Bilingual interface supporting English and Chinese
- **Debug Interface**: View which accounts support which models

## Architecture

### Backend (Go)
- **Framework**: Gin Web Framework
- **Database**: SQLite
- **Structure**:
  - `handlers/` - HTTP request handlers
  - `services/` - Business logic for proxy routing
  - `cache/` - In-memory model-to-account mapping cache
  - `utils/` - HTTP utilities
  - `models/` - Data structures
  - `db/` - Database operations

### Frontend (Vanilla HTML/JS)
- Apple-style UI design
- Modal-based forms for account management
- Toast notifications
- Masonry grid layout for account cards

## API Endpoints

| Method | Path | Description |
|--------|------|-------------|
| GET | `/`, `/debug` | Web interface |
| GET | `/v1/models` | List available models |
| ANY | `/v1/*` | Proxy API requests |
| GET | `/api/accounts` | List accounts |
| POST | `/api/accounts` | Create account |
| PUT | `/api/accounts/:id` | Update account |
| DELETE | `/api/accounts/:id` | Delete account |
| PATCH | `/api/accounts/:id` | Toggle enabled state |
| GET | `/api/debug/models` | Debug model mappings |
| POST | `/api/debug/models/reload` | Refresh cache |

## Environment Variables

- `DISABLE_CLAUDE`: Filter out models containing "claude" (default: true)
- `X-Enable-Claude` header: Override DISABLE_CLAUDE for specific requests

## Building & Running

```bash
cd backend
go build -o air_router
./air_router -config ./data -port 8080
```

## License

MIT

---

<div style="font-size: 3em; font-weight: bold; text-align: center; margin-top: 50px;">

**THIS PROJECT WAS ENTIRELY GENERATED BY AI**

</div>